:PROPERTIES:
:ID:       0038841f-335e-4020-a19a-0fced0af602e
:END:
#+TITLE: History: We want to keep a lot of it

#+begin_src js :tangle js/history.js

export function getServersHistory() {
    let servHist = localStorage.getItem('servers');
    if (servHist) {
        servHist = JSON.parse(servHist)
    } else {
        servHist = []
    }

    return servHist
}


export function setServersHistoryItem(server) {
    const sstr = JSON.stringify(server);
    const sstrs = getServersHistory().map(JSON.stringify)
    const newsstrs = [...sstrs.filter(s => { if (s !== sstr) {return s} }), sstr];
    const newHist = [...newsstrs].map(JSON.parse);
    localStorage.setItem('servers', JSON.stringify(newHist));

    return newHist;
}
#+end_src
